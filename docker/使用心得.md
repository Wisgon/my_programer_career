1. 常用命令：

   ```shell
   docker run -dit --runtime=nvidia -p 8333:8333 --name face_reco_server_volumn -v /home/wjpt/docker_volumn:/root/projects/face_reco_server/app/static/snapshot_temps face_reco_server_img /bin/bash
   
   docker run -dit --name wjpt_analyze --runtime=nvidia --restart=always -p 9023:9023 -p 9024:9024 -p 9020:9020 -p 9022:9022 wjpt_analyze_img /bin/bash
   
   docker run -dit --name face_reco_server --runtime=nvidia --restart=always -p 8333:8333 -p 9001:9001 -p 58000:58000 -p 32000:32000  face_reco_server_img
   
   
   
   docker run --name face_reco_server1114 -it --runtime=nvidia -v /home/fswj/face_reco_server:/home/projects/face_reco_server -v /etc/localtime:/etc/localtime:ro --restart=always -p 8333:8333 -p 23:23 face_reco_server1114 /bin/bash /face_reco_server.sh
   
   
   
   docker exec -it wjpt_analyze env LANG=C.UTF-8 /bin/bash
   
   cd ~/projects/wjpt_analyze/ && source activate wjpt_analyze
   
   
   
   docker run -it --name wjpt_analyze_ligang --runtime=nvidia --restart=always -v /home/fswj/wjpt_analyze:/root/projects/wjpt_analyze -v /etc/localtime:/etc/localtime:ro -p 9023:9023 wjpt_analyze_base /bin/bash /startup_script/ligang.sh
   
   
   
   docker run -it --name wjpt_analyze_jianqiang --runtime=nvidia -v /home/wjpt/projects/wjpt_analyze:/root/projects/wjpt_analyze -v /etc/localtime:/etc/localtime:ro -p 9024:9024 wjpt_analyze_base /bin/bash /startup_script/jianqiang.sh
   
   docker run -it  --name wjpt_analyze_xundao --runtime=nvidia -v /home/pyzd/wjpt_analyze:/root/projects/wjpt_analyze -v /etc/localtime:/etc/localtime:ro -p 9020:9020 base_img_2080 /bin/bash /startup_script/xundao.sh
   
   docker run  -d -h mail.ewomail.com --restart=always -p 25:25 -p 109:109  -p 110:110  -p 143:143 -p 465:465  -p 587:587 -p 993:993 -p 995:995  -p 81:80 -p 8080:8080 --name ewomail bestwu/ewomail
   
   docker run -d -p 25:25 -p 80:80 -p 110:110 -p 143:143 -p 443:443 -p 587:587 -p 993:993 -p 995:995 --name "PosteServ" -h "mx.qing.su" -t analogic/poste.io:latest
   
   sudo docker run --name zhps_jcpt -p 80:80 -v /home/jhd/Documents/jhd_projects/provost_system:/root/projects/provost_system -it zhps_jcpt_ubuntu /bin/bash -c "/startup.sh;/bin/bash"
   
   ```

   <br><br>

   

2. 更换镜像储存位置：进入docker的settings，点击左边Advanced选项，更改"Disk image location"即可;<br><br>

3. 不用sudo执行命令：`$sudo usermod -aG docker your_username`，退出，然后重新登录，以便让权限生效。<br><br>

4. ubuntu18.04镜像安装mysql:

   ```
   $apt-get install mysql-client mysql-server
   ```

   安装好后，`mysql -uroot -p`出现："ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)" 报错，原因是mysql没有自动启动，编写自动启动脚本：

   ```shell
   # /startup.sh
   /etc/init.d/mysql start
   ```

   然后，设置启动docker自动运行startup.sh：

   ```
   $docker run --name xxx  -it your_image:latest /bin/bash -c "/startup.sh;/bin/bash"
   ```

   出现Permission denied，原因startup.sh没有启动权限，修改启动权限：`chmod -x /startup.sh`即可<br><br>

5. 解决docker中的容器无法使用中文的问题:

   ```shell
   vim /etc/profile
   # 然后将export LANG="C.UTF-8"加到最后一行
   # 然后重新加载
   source /etc/profile
   ```

   问题解决；但是，docker进入命令行界面时，不会自动执行/etc/profile，所以要在~/.bashrc上写上`source /etc/profile`，但是，docker不进入命令行界面，而是在run容器的时候直接加上参数-d，这时是不会去执行~/.bashrc的，所以可以直接在启动脚本上加上`export LANG="C.UTF-8"`。。。<br><br>

6. import cv时，出现“ImportError: libSM.so.6: cannot open shared object file: No such file or directory”的报错，此时，需安装`apt-get install libsm6 libxext6 libxrender-dev`，即可；<br><br>

7. 访问宿主机：ip为172.17.0.1；<br><br>

8. docker要挂载windows的硬盘，需要改变挂载名称：

   ```shell
   $docker run --name windows_disk -v /d/the_volumn:/root/docker_volumn your_image /bin/bash   #挂载d:\\the_volumn
   $docker run --name windows_disk -v /d:/root/d_disk your_image /bin/bash   #挂载整个D盘到/root/d_disk
   ```

   <br><br>

9. docker容器启动时，需要生效一下配置的环境变量，环境变量配置在镜像内部的~/.bash_profile文件内，但是每次启动时，都不能自动执行source，环境变量无法生效。

   经多方调研，发现镜像启动时，自动执行的是~/.bashrc文件，所以，环境变量需要配置在该文件内，这样镜像启动时，可自动执行该文件，使环境变量生效。<br><br>

10. docker在海康威视sdk下执行./main的时候，找不到libhcnet.so的问题，是没有把bin文件夹加入系统的bin搜索路径，直接：`sudo vim /etc/ld.so.conf`, 在最后一行加入：`/home/jhd/Documents/jhd_projects/zhps_jcpt/listener/linux64/lib`，保存即可；<br><br>

    

    